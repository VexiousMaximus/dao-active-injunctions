<!DOCTYPE html>
<html>
<head>
  <title>DAO Active Injunctions</title>

  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      overflow: hidden;
    }

    #map {
      height: 100vh;
      width: 100vw;
      background-color: #c9f7f7; /* light teal background */
    }

    .leaflet-interactive:focus {
      outline: none;
    }

    /* Login button styling */
    #loginBtn {
      position: absolute;
      top: 20px;
      right: 20px;
      z-index: 2000; /* high enough to be above the map */
      padding: 10px 20px;
      background-color: #ff4444;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 14px;
      font-weight: bold;
      box-shadow: 0 2px 5px rgba(0,0,0,0.3);
    }

    #loginBtn:hover {
      background-color: #ff2222;
    }
  </style>
</head>
<body>

<div id="map"></div>

<!-- Sign in button -->
<button id="loginBtn">Sign in with GTA World</button>

<script>
  // ===============================
  // MAP SETUP
  // ===============================

  var imageWidth = 3500;
  var imageHeight = 3500;
  var bounds = [[0, 0], [imageHeight, imageWidth]];

  var map = L.map('map', {
    crs: L.CRS.Simple,
    minZoom: 0,
    maxZoom: 5,
    maxBounds: bounds,
    maxBoundsViscosity: 1.0,
    zoomSnap: 0.5, // smoother zoom
    zoomDelta: 0.5
  });

  L.imageOverlay('lsmap.jpeg', bounds).addTo(map);

  // Start zoomed in
  map.fitBounds(bounds);
  map.setZoom(1); // adjust this number to start closer in

  // ===============================
  // CTRL + CLICK COORDINATE TOOL
  // ===============================
  map.on('click', function(e) {
    if (e.originalEvent.ctrlKey) {
      var y = Math.round(e.latlng.lat);
      var x = Math.round(e.latlng.lng);

      L.popup()
        .setLatLng(e.latlng)
        .setContent(
          "<b>Coordinates:</b><br>" +
          "[ " + y + ", " + x + " ]<br><br>" +
          "Rectangle format example:<br>" +
          "[[" + y + ", " + x + "], [Y2, X2]]"
        )
        .openOn(map);

      console.log("Coordinate:", "[" + y + ", " + x + "]");
    }
  });

  // ===============================
  // REGION DEFINITIONS
  // ===============================
  var publicSafetyZone1 = L.polygon([
    [1631, 2199],
    [1590, 2234],
    [1499, 2230],
    [1491, 2257],
    [1301, 2234],
    [1296, 2151],
    [1262, 2113],
    [1325, 2032],
    [1333, 2015],
    [1372, 2049],
    [1409, 2002],
    [1634, 2194]
  ], {
    color: "#ff0000",
    weight: 2,
    fillColor: "#ff0000",
    fillOpacity: 0.4
  }).addTo(map);

  publicSafetyZone1.bindTooltip(
    "PUBLIC SAFETY ZONE 1 - SOUTHSIDE LOCOS 13",
    { direction: "center" }
  );

  var hallofjustice = L.polygon([
    [1506, 2066],
    [1595, 1962],
    [1635, 2036],
    [1569, 2116]
  ], {
    color: "#23FA00",
    weight: 2,
    fillColor: "#23FA00",
    fillOpacity: 0.4
  }).addTo(map);

  hallofjustice.bindTooltip(
    "HALL OF JUSTICE / DAO OPS",
    { direction: "center" }
  );

  // ===============================
  // GTA WORLD LOGIN BUTTON
  // ===============================
  const clientId = "YOUR_CLIENT_ID"; // Replace with your GTA World client ID
  const redirectUri = "https://your-render-domain.onrender.com/auth/callback"; // Replace with your Render URL

  document.getElementById('loginBtn').addEventListener('click', () => {
    const authUrl = `https://ucp.gta.world/oauth/authorize?client_id=${clientId}&redirect_uri=${encodeURIComponent(redirectUri)}&response_type=code`;
    window.location.href = authUrl;
  });

</script>

</body>
</html>

